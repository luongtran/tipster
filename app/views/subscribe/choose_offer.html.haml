- content_for :title do
  Registration
.container
  .row
    .subscribe-steps
      %ul.steps-container
        %li.complete
          .text-center
            %p
              %span.step-number 1
            %p
              %span.step-name= link_to t('menu.subscribe.step1'), subscribe_account_path
        %li.step-seperator-container
          .step-seperator
        %li.current
          .text-center
            %p
              %span.step-number 2
            %p
              %span.step-name= t('menu.subscribe.step2')
        %li.step-seperator-container
          .step-seperator
        %li
          .text-center
            %p
              %span.step-number 3
            %p
              %span.step-name= t('menu.subscribe.step3')
        %li.step-seperator-container
          .step-seperator
        %li
          .text-center
            %p
              %span.step-number 4
            %p
              %span.step-name= t('menu.subscribe.step4')
        %li.step-seperator-container
          .step-seperator
        %li
          .text-center
            %p
              %span.step-number 5
            %p
              %span.step-name= t('menu.subscribe.step5')
        %li.step-seperator-container
          .step-seperator
        %li
          .text-center
            %p
              %span.step-number 6
            %p
              %span.step-name= t('menu.subscribe.step6')
  .row
    .step-content
      .panel.panel-default
        .panel-body.text-center
          - if @plans.present?
            .pricing-wrapper
              = render 'home/pricing',plans: @plans,selected_plan: @selected_plan
          - else
            = content_for(:title, "Tipster Ranking")
            .tipster-list#tipster_list
              .tipster-list-inner.container
                .tipster-list-line1
                  %ul.list-inline
                    %li
                      %a{href: tipsters_path(sport_filter_param(nil)), class: class_for_sport_filter('all')} All
                    - @sports.each do |sport|
                      %li
                        %a{href: tipsters_path(sport_filter_param(sport.name.downcase)), class: class_for_sport_filter(sport.name)}= sport.name.titleize
                .tipster-list-line2.clearfix
                  .pull-left
                    %ul.list-inline.list-unstyled.mbn.rank-ranges
                      - Tipster::RANKING_RANGES.each do |range|
                        %li
                          %a{href: tipsters_path(ranking_param(range)), class: class_for_current_ranking_range(range)}
                            = t("tipster.ranking.#{range}").titleize
                  .pull-right
                    %span.mrs.text-muted Filter by status
                    = select_tag :status, options_for_select(tipster_statuses_for_select), id: 'tipster_statuses_filer'
                .tipster-list-table#tipster-list-table
                  .row
                    .col-md-12
                      %table.table.table-hover
                        %thead
                          %tr
                            %th Tipster
                            %th Profit
                            %th Yield
                            %th
                              = ("N" + content_tag(:sup, 'o')).html_safe
                              of tips
                            %th Hit Rate
                            %th Avg.Odds
                            %th Profitable Months
                            %th
                        %tbody
                          - @tipsters.each_with_index do |tipster,index|
                            %tr
                              %td
                                = image_tag tipster.avatar.url || 'demo.jpg', class: 'tipster-top-avatar-mini'
                                %a.tipster-name{href: tipster_path(tipster)}
                                  = tipster.full_name
                                .tipster-profit-chart
                                  = image_tag profit_img_chart_url_for(tipster.profit_per_months), alt: 'Profit chart'
                              %td= tipster.profit
                              %td= tipster.yield_in_string
                              %td= tipster.number_of_tips
                              %td= tipster.hit_rate_in_string
                              %td= tipster.avg_odds
                              %td= tipster.profitable_months
                              %td.text-center
                                %div.btn-group.btn-group-sm
                                  - if @tipsters_in_subscription.present? && @tipsters_in_subscription.include?(tipster)
                                    %button.btn.btn-sm.btn-default Already purchase
                                  - else
                                    = render 'shared/add_to_cart_form', {tipster_id: tipster.id, disable: tipster_ids_in_cart.include?(tipster.id.to_s)}
                      - if @tipsters.empty?
                        .text-center.clearfix
                          %br
                          %p.text-warning
                            Not found any tipsters match!
              #top_tipsters_of_weeks
                %h4.text-slim.text-success.text-center Top 3 of the week
                %hr.mbs.mts
                  .tipster-top-body.remote-data{data: {url: top_three_tipsters_path(sport: query_params[:sport]), 'error-msg' => 'Failed to load top 3 of the week.'}}
              - if @show_checkout_dialog && !tipster_ids_in_cart.empty?
                #modal-confirm-checkout.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", role: "dialog", tabindex: "-1"}
                  .modal-dialog
                    .modal-content
                      .modal-header
                        %button.close{"aria-hidden" => "true", "data-dismiss" => "modal", type: "button"} ×
                        %h4.modal-title The tipster has been added to your cart
                      .modal-body
                        .text-center.text-info
                          - if tipster_ids_in_cart.size + 1 > @select_plan.number_tipster + Subscription::MAX_ADDTIONAL_TIPSTERS
                            Your cart is full!
                          - else
                            Would you add a Tipster? - 60% for each additional Tipster!
                            %p
                              %br
                              %button.btn.btn-success.btn-large{"data-dismiss" => "modal", type: "button"} Yes, I want!
                              %a.btn.btn-primary{href: subscribe_checkout_path} No, process to checkout
                          %a.btn.btn-default{href: cart_path}
                            %i.glyphicon.glyphicon-shopping-cart
                            View Cart